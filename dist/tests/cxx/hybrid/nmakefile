root = ..\..\..

!include $(root)\build\config.nmake

dirs = sequences

!if "$(XSDE_POLYMORPHIC)" == "y"
dirs = $(dirs) polymorphism\multischema
!endif

!if "$(XSDE_STL)" == "y"
!if "$(XSDE_STL_ITERATOR)" == "y"
dirs = $(dirs) iterator
!endif
!endif

!if "$(XSDE_IOSTREAM)" == "y"
dirs = $(dirs) built-in default list recursive test-template union

!if "$(XSDE_CDR)" == "y"
dirs = $(dirs) binary/cdr
!endif

!if "$(XSDE_XDR)" == "y"
dirs = $(dirs) binary/xdr
!endif

!if "$(XSDE_PARSER_VALIDATION)" == "y"
dirs = $(dirs) choice
!endif

!endif # XSDE_IOSTREAM


all:
	@for %i in ( $(dirs) ) do \
@cmd /c "cd %i & $(MAKE) /nologo /f nmakefile"

gen test clean cleanobj:
	@for %i in ( $(dirs) ) do \
@cmd /c "cd %i & $(MAKE) /nologo /f nmakefile $@"
